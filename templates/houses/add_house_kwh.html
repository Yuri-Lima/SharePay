{% extends 'houses/base.html' %}
{% load static %}

{% block title %}SharePay - Kwh{% endblock title %}

{% block content %}
  <div class="overlay"></div>
  <video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
    <source src="{% static 'mp4/bg.mp4' %}" type="video/mp4">
  </video>
  <div class="masthead">
    <div class="masthead-bg"></div>
    <div class="container h-100">
      <div class="row h-100">
        <div class="col-12 my-auto">
          <div class="masthead-content py-5 py-md-0">
            <form action="" method="POST", enctype="multipart/form-data">
                {% for hidden_field in form.hidden_fields %}
                    {{ hidden_field.erros }}
                    {{ hidden_field }}
                {% endfor %}

                {% csrf_token %}

                {{ form.management_form }}
                {{ form.non_form_errors }}
                {{ form.non_filed_errors }}
                

                <h3 class='text-white'>Add Kilowatts/Hour</h3>
                {% for kwh_form in form.forms %}
                    <hr>
                {% for hidden_field in kwh_form.hidden_fields %}
                    {{ hidden_field.erros }}
                {% endfor %}
                <div class="row">
                    <div class="col">
                        <div class="alert alert-warning" role="alert" p-1><strong>Attention!</strong> You must fill max one option.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col ">
                        <p class='text-white'><b>Option 1</b></p>
                        <p class='text-white'>Total Kilowatts/Hour:</p>
                        <p>{{kwh_form.kwh}}</p>
                        <div class='p-3 mb-2 bg-warning text-dark' id="error">
                          <p>{{kwh_form.kwh.errors}}</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                    <p class='text-white'><b>Option 2</b></p>
                        <p class='text-white' >What was the previous Kw/h read:</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p>{{ kwh_form.last_read_kwh }}</p>
                        <div class='p-3 mb-2 bg-warning text-dark' id="error">
                          <p>{{kwh_form.last_read_kwh.errors}}</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <p class='text-white' >What is the present Kw/h read:</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p>{{ kwh_form.read_kwh }}</p>
                        <div class='p-3 mb-2 bg-warning text-dark' id="error">
                          <p>{{kwh_form.read_kwh.errors}}</p>
                        </div>
                        
                    </div>
                </div>
                {% if form.can_delete and kwh_form.instance.id %}
                  <div class="row">
                      <div class="col">
                          <!-- If you are useing formset as ModelFormSet (name_form.id) -->
                          {{ kwh_form.id }}
                          <p class='text-white'>{{ kwh_form.DELETE }} - <b>Delete</b></p>
                      </div>
                  </div>
                {% endif %}
                {% endfor %}
                <hr>
                <p>
                {% for kwh in  houseskwh.house_kilowatt_related.all %}
                    <button type="submit" value="Add Tenants" class="btn btn-primary w-100 mb-3" >Update Kilowatts</button>
                {% empty %}
                    <button type="submit" value="Add Tenants" class="btn btn-primary w-100 mb-3" >Add Kilowatts</button>
                {% endfor %}
                    <a href="{{ houseskwh.get_absolute_url }}" role="button" class="btn btn-secondary w-100">Back</a>
                </p>
            </form>


            {% if user.is_authenticated %}
            <hr>
            <div class="input-group-append">
              <a href="{% url 'users:logout' %}" type="button" class="btn btn-outline-warning btn-sm ">Log Out</a>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="social-icons">
    <ul class="list-unstyled text-center mb-0">
      <li class="list-unstyled-item">
        <a href="#">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
      <li class="list-unstyled-item">
        <a href="#">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
      <li class="list-unstyled-item">
        <a href="#">
          <i class="fab fa-instagram"></i>
        </a>
      </li>
    </ul>
  </div>
{% endblock content %}