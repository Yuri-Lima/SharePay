{% extends 'houses/base.html' %}
{% load static %}
{% load humanize %}


{% block title %}SharePay - Bill House{% endblock title %}

{% block content %}
  <div class="overlay"></div>
  <video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop">
    <source src="{% static 'mp4/bg.mp4' %}" type="video/mp4">
  </video>

  <div class="masthead">
    <div class="masthead-bg"></div>
    <div class="container h-100">
      <div class="row h-100">
        <div class="col-12 my-auto">
          <div class="masthead-content text-white py-5 py-md-0">
              <form action="" method="POST", enctype="multipart/form-data">
                {% for hidden_field in form.hidden_fields %}
                    {{ hidden_field.erros }}
                    {{ hidden_field }}
                {% endfor %}

                {% csrf_token %}

                {{ form.management_form }}
                {{ form.non_form_erros }}

                <h3>Tenants</h3>
                <small>Total Tenants: {{houses.house_tenant_related.all.count }}</small> 
                {% for name_form in form.forms %}
                <hr>
                {% comment %} <h5> 
                  {% if form.forms|length > 1 %}
                      Add another tenant
                  {% else %}
                      Add a tenant
                  {% endif %}
            
                </h5> {% endcomment %}
                {% for hidden_field in name_form.hidden_fields %}
                    {{ hidden_field.erros }}
                {% endfor %}
                <div class="row">
                    <p>What is the Tenant's {{forloop.counter|ordinal}} Name?</p>
                </div>
                <div class="row">
                    <p>{{ name_form.house_tenant }}</p>
                </div>
                
                <div class="row">
                    <div class="col">
                        <p>How long has he/she been at {{name_form.house_name_FK}}?</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p>From:</p>
                    </div>
                    <div class="col">
                        <p>{{ name_form.start_date }}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p>End:</p>
                    </div>
                    <div class="col">
                        <p>{{ name_form.end_date }}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        {% if form.can_delete and name_form.instance.id %}
                        <!-- If you are useing formset as ModelFormSet (name_form.id) -->
                        {{ name_form.id }}
                        <p>{{ name_form.DELETE }} - Delete  </p>
                    {% endif %}
                    </div>
                </div>
                
                {% endfor %}
                <hr>
                
                <p>
                    <button type="submit" value="Add Tenants" class="btn btn-primary w-100 mb-3" >Save/Update</button>
                    <a href="{{ house.get_absolute_url }}" role="button" class="btn btn-secondary w-100">Cancel</a>
                </p>
            </form>

            {% if user.is_authenticated %}
            <hr>
            <hr>
            <hr>
            <div class="input-group-append">
              <a href="{% url 'users:logout' %}" type="button" class="btn btn-outline-warning btn-sm ">Log Out</a>
            </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="social-icons">
    <ul class="list-unstyled text-center mb-0">
      <li class="list-unstyled-item">
        <a href="#">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
      <li class="list-unstyled-item">
        <a href="#">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
      <li class="list-unstyled-item">
        <a href="#">
          <i class="fab fa-instagram"></i>
        </a>
      </li>
    </ul>
  </div>
{% endblock content %}